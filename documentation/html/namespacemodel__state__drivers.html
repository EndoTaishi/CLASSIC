<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>CLASSIC: model_state_drivers Module Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">CLASSIC
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="namespaces.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Types&#160;List</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="namespaces.html"><span>Modules&#160;List</span></a></li>
      <li><a href="namespacemembers.html"><span>Module&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('namespacemodel__state__drivers.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">model_state_drivers Module Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Central driver to read in, and write out all model state variables (replacing INI and CTM files) as well as the model inputs such as MET, population density, land use change, CO2 etc.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions/Subroutines</h2></td></tr>
<tr><td colspan="2"><div class="groupHeader"></div></td></tr>
<tr class="memitem:a9082d4f86f78f0dca4f7e3ed00c55b02"><td class="memItemLeft" align="right" valign="top">subroutine, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemodel__state__drivers.html#a9082d4f86f78f0dca4f7e3ed00c55b02">read_modelsetup</a></td></tr>
<tr class="memdesc:a9082d4f86f78f0dca4f7e3ed00c55b02"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads in the model setup from the netcdf initialization file. The number of latitudes is always 1 offline while the maximum number of mosaics (nmos), the number of soil layers (ignd), are read from the netcdf. ilg is then calculated from nlat and nmos.  <a href="#a9082d4f86f78f0dca4f7e3ed00c55b02">More...</a><br /></td></tr>
<tr class="separator:a9082d4f86f78f0dca4f7e3ed00c55b02"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader"></div></td></tr>
<tr class="memitem:a8370ff5a658ed743f387580d7ee9ec1a"><td class="memItemLeft" align="right" valign="top">subroutine, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemodel__state__drivers.html#a8370ff5a658ed743f387580d7ee9ec1a">read_initialstate</a> (lonIndex, latIndex)</td></tr>
<tr class="memdesc:a8370ff5a658ed743f387580d7ee9ec1a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads in the model initial conditions for both physics and biogeochemistry (if CTEM on)  <a href="#a8370ff5a658ed743f387580d7ee9ec1a">More...</a><br /></td></tr>
<tr class="separator:a8370ff5a658ed743f387580d7ee9ec1a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader"></div></td></tr>
<tr class="memitem:a0864e6b6afaeae951a26d12fef4d2f42"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0864e6b6afaeae951a26d12fef4d2f42"></a>
subroutine, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemodel__state__drivers.html#a0864e6b6afaeae951a26d12fef4d2f42">write_restart</a> (lonIndex, latIndex)</td></tr>
<tr class="memdesc:a0864e6b6afaeae951a26d12fef4d2f42"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write out the model restart file to netcdf. We only write out the variables that the model influences. This overwrites a pre-existing netcdf file. <br /></td></tr>
<tr class="separator:a0864e6b6afaeae951a26d12fef4d2f42"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader"></div></td></tr>
<tr class="memitem:a3965f305f082ec630c8e7762d7e22122"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3965f305f082ec630c8e7762d7e22122"></a>
subroutine, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemodel__state__drivers.html#a3965f305f082ec630c8e7762d7e22122">getinput</a> (inputRequested, longitude, latitude)</td></tr>
<tr class="memdesc:a3965f305f082ec630c8e7762d7e22122"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read in a model input from a netcdf file and store the file's time array as well as the input values into memory. <br /></td></tr>
<tr class="separator:a3965f305f082ec630c8e7762d7e22122"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader"></div></td></tr>
<tr class="memitem:a2c90637662c27f4f81723229537c6ade"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2c90637662c27f4f81723229537c6ade"></a>
subroutine, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemodel__state__drivers.html#a2c90637662c27f4f81723229537c6ade">updateinput</a> (inputRequested, iyear, imonth)</td></tr>
<tr class="memdesc:a2c90637662c27f4f81723229537c6ade"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update the input field variable based on the present model timestep. <br /></td></tr>
<tr class="separator:a2c90637662c27f4f81723229537c6ade"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader"></div></td></tr>
<tr class="memitem:aa1f54e07c9b953fa76892cde43cd0395"><td class="memItemLeft" align="right" valign="top">subroutine, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemodel__state__drivers.html#aa1f54e07c9b953fa76892cde43cd0395">getmet</a> (longitude, latitude, nday, delt)</td></tr>
<tr class="memdesc:aa1f54e07c9b953fa76892cde43cd0395"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read in the meteorological input from a netcdf file.  <a href="#aa1f54e07c9b953fa76892cde43cd0395">More...</a><br /></td></tr>
<tr class="separator:aa1f54e07c9b953fa76892cde43cd0395"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader"></div></td></tr>
<tr class="memitem:a250e1a4a9a115535075497adede17f46"><td class="memItemLeft" align="right" valign="top">subroutine, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemodel__state__drivers.html#a250e1a4a9a115535075497adede17f46">updatemet</a> (metTimeIndex, delt, iyear, iday, ihour, imin, metDone)</td></tr>
<tr class="memdesc:a250e1a4a9a115535075497adede17f46"><td class="mdescLeft">&#160;</td><td class="mdescRight">This transfers the met data of this time step from the read-in array to the instantaneous variables. This also set iyear to the present year of MET being read in.  <a href="#a250e1a4a9a115535075497adede17f46">More...</a><br /></td></tr>
<tr class="separator:a250e1a4a9a115535075497adede17f46"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader"></div></td></tr>
<tr><td colspan="2"><div class="groupHeader"></div></td></tr>
<tr class="memitem:aaf94fac699883c97781af896554f4bbf"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aaf94fac699883c97781af896554f4bbf"></a>
subroutine, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemodel__state__drivers.html#aaf94fac699883c97781af896554f4bbf">deallocinput</a></td></tr>
<tr class="memdesc:aaf94fac699883c97781af896554f4bbf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deallocates the input files arrays. <br /></td></tr>
<tr class="separator:aaf94fac699883c97781af896554f4bbf"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a89e51b132993793476e524f1f9f5ba65"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a89e51b132993793476e524f1f9f5ba65"></a>
integer, dimension(:), allocatable&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemodel__state__drivers.html#a89e51b132993793476e524f1f9f5ba65">co2time</a></td></tr>
<tr class="memdesc:a89e51b132993793476e524f1f9f5ba65"><td class="mdescLeft">&#160;</td><td class="mdescRight">The time (years) from the CO2File. <br /></td></tr>
<tr class="separator:a89e51b132993793476e524f1f9f5ba65"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a851669da614fd5bd39036d820305ee48"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a851669da614fd5bd39036d820305ee48"></a>
real, dimension(:), allocatable&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemodel__state__drivers.html#a851669da614fd5bd39036d820305ee48">co2fromfile</a></td></tr>
<tr class="memdesc:a851669da614fd5bd39036d820305ee48"><td class="mdescLeft">&#160;</td><td class="mdescRight">The array of CO2 values (ppm) from the CO2File. <br /></td></tr>
<tr class="separator:a851669da614fd5bd39036d820305ee48"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a65753df111802135e246c79cbcde84"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9a65753df111802135e246c79cbcde84"></a>
integer, dimension(:), allocatable&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemodel__state__drivers.html#a9a65753df111802135e246c79cbcde84">ch4time</a></td></tr>
<tr class="memdesc:a9a65753df111802135e246c79cbcde84"><td class="mdescLeft">&#160;</td><td class="mdescRight">The time (years) from the CH4File. <br /></td></tr>
<tr class="separator:a9a65753df111802135e246c79cbcde84"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acff60410ea27646f3634847ca4452bfb"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="acff60410ea27646f3634847ca4452bfb"></a>
real, dimension(:), allocatable&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemodel__state__drivers.html#acff60410ea27646f3634847ca4452bfb">ch4fromfile</a></td></tr>
<tr class="memdesc:acff60410ea27646f3634847ca4452bfb"><td class="mdescLeft">&#160;</td><td class="mdescRight">The array of CH4 values (ppm) from the CH4File. <br /></td></tr>
<tr class="separator:acff60410ea27646f3634847ca4452bfb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05b586a2493171825f8c8d11318d8e70"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a05b586a2493171825f8c8d11318d8e70"></a>
integer, dimension(:), allocatable&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemodel__state__drivers.html#a05b586a2493171825f8c8d11318d8e70">popdtime</a></td></tr>
<tr class="memdesc:a05b586a2493171825f8c8d11318d8e70"><td class="mdescLeft">&#160;</td><td class="mdescRight">The time (years) from the population density file. <br /></td></tr>
<tr class="separator:a05b586a2493171825f8c8d11318d8e70"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a625fd4a86b64a3525a117785e007a4ce"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a625fd4a86b64a3525a117785e007a4ce"></a>
real, dimension(:), allocatable&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemodel__state__drivers.html#a625fd4a86b64a3525a117785e007a4ce">popdfromfile</a></td></tr>
<tr class="memdesc:a625fd4a86b64a3525a117785e007a4ce"><td class="mdescLeft">&#160;</td><td class="mdescRight">The array of CH4 values (ppm) from the POPDFile. <br /></td></tr>
<tr class="separator:a625fd4a86b64a3525a117785e007a4ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7365a1847d3e0fa37e4fd06e1c98b86e"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7365a1847d3e0fa37e4fd06e1c98b86e"></a>
integer, dimension(:), allocatable&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemodel__state__drivers.html#a7365a1847d3e0fa37e4fd06e1c98b86e">lghttime</a></td></tr>
<tr class="memdesc:a7365a1847d3e0fa37e4fd06e1c98b86e"><td class="mdescLeft">&#160;</td><td class="mdescRight">The time from the lightning density file (usually months) <br /></td></tr>
<tr class="separator:a7365a1847d3e0fa37e4fd06e1c98b86e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e3fcc2bc39d764ce49294bf3efe163b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1e3fcc2bc39d764ce49294bf3efe163b"></a>
real, dimension(:), allocatable&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemodel__state__drivers.html#a1e3fcc2bc39d764ce49294bf3efe163b">lghtfromfile</a></td></tr>
<tr class="memdesc:a1e3fcc2bc39d764ce49294bf3efe163b"><td class="mdescLeft">&#160;</td><td class="mdescRight">The array of lightning density from the LGHTFile. <br /></td></tr>
<tr class="separator:a1e3fcc2bc39d764ce49294bf3efe163b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d4759e399c36757f852b4648ce8e14d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6d4759e399c36757f852b4648ce8e14d"></a>
integer, dimension(:), allocatable&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemodel__state__drivers.html#a6d4759e399c36757f852b4648ce8e14d">luctime</a></td></tr>
<tr class="memdesc:a6d4759e399c36757f852b4648ce8e14d"><td class="mdescLeft">&#160;</td><td class="mdescRight">The time from the LUC file. <br /></td></tr>
<tr class="separator:a6d4759e399c36757f852b4648ce8e14d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a14282bbeec10dfe02468d4c864084289"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a14282bbeec10dfe02468d4c864084289"></a>
real, dimension(:,:), allocatable&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemodel__state__drivers.html#a14282bbeec10dfe02468d4c864084289">lucfromfile</a></td></tr>
<tr class="memdesc:a14282bbeec10dfe02468d4c864084289"><td class="mdescLeft">&#160;</td><td class="mdescRight">The array of LUC from the LUCFile. <br /></td></tr>
<tr class="separator:a14282bbeec10dfe02468d4c864084289"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb0a4dc9e59bd80a32a017ff2936eabf"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="adb0a4dc9e59bd80a32a017ff2936eabf"></a>
real, dimension(:), allocatable&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemodel__state__drivers.html#adb0a4dc9e59bd80a32a017ff2936eabf">mettime</a></td></tr>
<tr class="memdesc:adb0a4dc9e59bd80a32a017ff2936eabf"><td class="mdescLeft">&#160;</td><td class="mdescRight">The time from the Met file. <br /></td></tr>
<tr class="separator:adb0a4dc9e59bd80a32a017ff2936eabf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae9f38c4fe6798c3315b5759e1318aa26"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae9f38c4fe6798c3315b5759e1318aa26"></a>
real, dimension(:), allocatable&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemodel__state__drivers.html#ae9f38c4fe6798c3315b5759e1318aa26">metfss</a></td></tr>
<tr class="memdesc:ae9f38c4fe6798c3315b5759e1318aa26"><td class="mdescLeft">&#160;</td><td class="mdescRight">Incoming shortwave radiation from metFile <img class="formulaInl" alt="$[W m^{-2} ]$" src="form_235.png"/>. <br /></td></tr>
<tr class="separator:ae9f38c4fe6798c3315b5759e1318aa26"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ba88f12c4ecaeafed6adb7d7dd1b54a"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3ba88f12c4ecaeafed6adb7d7dd1b54a"></a>
real, dimension(:), allocatable&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemodel__state__drivers.html#a3ba88f12c4ecaeafed6adb7d7dd1b54a">metfdl</a></td></tr>
<tr class="memdesc:a3ba88f12c4ecaeafed6adb7d7dd1b54a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Incoming longwave radiation from metFile <img class="formulaInl" alt="$[W m^{-2} ]$" src="form_235.png"/>. <br /></td></tr>
<tr class="separator:a3ba88f12c4ecaeafed6adb7d7dd1b54a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb860caee32d4a68976b6a05d8442a1f"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aeb860caee32d4a68976b6a05d8442a1f"></a>
real, dimension(:), allocatable&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemodel__state__drivers.html#aeb860caee32d4a68976b6a05d8442a1f">metpre</a></td></tr>
<tr class="memdesc:aeb860caee32d4a68976b6a05d8442a1f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Precipitation from metFile <img class="formulaInl" alt="$[kg m^{-2} s^{-1} ]$" src="form_219.png"/>. <br /></td></tr>
<tr class="separator:aeb860caee32d4a68976b6a05d8442a1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3c6c11505f588ff47381b6032a0d59a"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac3c6c11505f588ff47381b6032a0d59a"></a>
real, dimension(:), allocatable&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemodel__state__drivers.html#ac3c6c11505f588ff47381b6032a0d59a">metta</a></td></tr>
<tr class="memdesc:ac3c6c11505f588ff47381b6032a0d59a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Air temperature from metFile (Celsius) <br /></td></tr>
<tr class="separator:ac3c6c11505f588ff47381b6032a0d59a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6aa9305308b58bb2e343cb330857aac6"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6aa9305308b58bb2e343cb330857aac6"></a>
real, dimension(:), allocatable&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemodel__state__drivers.html#a6aa9305308b58bb2e343cb330857aac6">metqa</a></td></tr>
<tr class="memdesc:a6aa9305308b58bb2e343cb330857aac6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Specific humidity from metFile. <br /></td></tr>
<tr class="separator:a6aa9305308b58bb2e343cb330857aac6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af0042c5d150b2cea4721b9d580ff7c78"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af0042c5d150b2cea4721b9d580ff7c78"></a>
real, dimension(:), allocatable&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemodel__state__drivers.html#af0042c5d150b2cea4721b9d580ff7c78">metuv</a></td></tr>
<tr class="memdesc:af0042c5d150b2cea4721b9d580ff7c78"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wind speed from metFile. <br /></td></tr>
<tr class="separator:af0042c5d150b2cea4721b9d580ff7c78"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc5be642b807197a0b4a20a10a8ed93b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="afc5be642b807197a0b4a20a10a8ed93b"></a>
real, dimension(:), allocatable&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemodel__state__drivers.html#afc5be642b807197a0b4a20a10a8ed93b">metpres</a></td></tr>
<tr class="memdesc:afc5be642b807197a0b4a20a10a8ed93b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Atmospheric pressure from metFile. <br /></td></tr>
<tr class="separator:afc5be642b807197a0b4a20a10a8ed93b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Central driver to read in, and write out all model state variables (replacing INI and CTM files) as well as the model inputs such as MET, population density, land use change, CO2 etc. </p>
</div><h2 class="groupheader">Function/Subroutine Documentation</h2>
<a class="anchor" id="aa1f54e07c9b953fa76892cde43cd0395"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine, public model_state_drivers::getmet </td>
          <td>(</td>
          <td class="paramtype">real, intent(in)&#160;</td>
          <td class="paramname"><em>longitude</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, intent(in)&#160;</td>
          <td class="paramname"><em>latitude</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>nday</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, intent(in)&#160;</td>
          <td class="paramname"><em>delt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read in the meteorological input from a netcdf file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">longitude</td><td>Longitude of grid cell of interest</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">latitude</td><td>Latitude of grid cell of interest</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">nday</td><td>Maximum number of physics timesteps in one day</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">delt</td><td>Physics timestep (s) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a8370ff5a658ed743f387580d7ee9ec1a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine, public model_state_drivers::read_initialstate </td>
          <td>(</td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>lonIndex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>latIndex</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads in the model initial conditions for both physics and biogeochemistry (if CTEM on) </p>
<p>Rest of the initialization variables are needed to run CTEM but if starting from bare ground initialize all live and dead c pools from zero. suitable values of extnprobgrd and prbfrhucgrd would still be required. set stdaln to 1 for operation in non-gcm stand alone mode, in the CTEM initialization file.</p>
<p>If fire and competition are on, save the stemmass and rootmass for use in burntobare subroutine on the first timestep.</p>
<p>Take the first tile value now and put it over the other tiles</p>
<p>if this run uses the competition and starts from bare ground, set up the model state here. this overwrites what was read in from the initialization file. </p>

</div>
</div>
<a class="anchor" id="a9082d4f86f78f0dca4f7e3ed00c55b02"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine, public model_state_drivers::read_modelsetup </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads in the model setup from the netcdf initialization file. The number of latitudes is always 1 offline while the maximum number of mosaics (nmos), the number of soil layers (ignd), are read from the netcdf. ilg is then calculated from nlat and nmos. </p>
<p>First, open initial conditions file.</p>
<p>Next, retrieve dimensions. We assume the file has 'lon' and 'lat' for names of longitude and latitude.</p>
<p>calculate the number and indices of the pixels to be calculated</p>
<p>Based on the domainBounds, we make vectors of the cells to be run.</p>
<p>Save the longitudes and latitudes over the region of interest for making the output files.</p>
<p>Retrieve the number of soil layers (set ignd!)</p>
<p>Grab the model domain. We use GC since it is the land cells we want to run the model over. the 'Mask' variable is all land (we don't run over Antarctica).</p>
<p>To determine nmos, we use the largest number in the input file variable nmtest for the region we are running.</p>
<p>Determine the size of ilg which is nlat times nmos</p>
<p>Lastly, open some files so they are ready</p>
<p>Open the meteorological forcing file </p>

</div>
</div>
<a class="anchor" id="a250e1a4a9a115535075497adede17f46"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine, public model_state_drivers::updatemet </td>
          <td>(</td>
          <td class="paramtype">integer, intent(inout)&#160;</td>
          <td class="paramname"><em>metTimeIndex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, intent(in)&#160;</td>
          <td class="paramname"><em>delt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(out)&#160;</td>
          <td class="paramname"><em>iyear</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(out)&#160;</td>
          <td class="paramname"><em>iday</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(out)&#160;</td>
          <td class="paramname"><em>ihour</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(out)&#160;</td>
          <td class="paramname"><em>imin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">logical, intent(out)&#160;</td>
          <td class="paramname"><em>metDone</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This transfers the met data of this time step from the read-in array to the instantaneous variables. This also set iyear to the present year of MET being read in. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">mettimeindex</td><td>Index to read from met file</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">delt</td><td>Physics timestep (s)</td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">iyear</td><td>Present year of simulation</td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">iday</td><td>Present day of simulation</td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">ihour</td><td>Present hour of simulation</td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">imin</td><td>Present minute of simulation</td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">metdone</td><td>Switch signalling end of met data </td></tr>
  </table>
  </dd>
</dl>
<p>Finding the day is straight forward from the day of month (dom) and the month</p>
<p>The dayfrac can then be parsed to give the hour and minute.</p>
<p>The meteorological data is then passed to the instantaneous variables from the larger variables that store the run's met data read in earlier.</p>
<p>If the end of the timeseries is reached, change the metDone switch to true. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacemodel__state__drivers.html">model_state_drivers</a></li>
    <li class="footer">Generated on Wed Oct 25 2017 10:48:14 for CLASSIC by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.9.1 </li>
  </ul>
</div>
</body>
</html>
