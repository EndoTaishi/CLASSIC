\hypertarget{group__io__driver__read__from__ctm}{}\section{Io\+\_\+driver\+\_\+read\+\_\+from\+\_\+ctm}
\label{group__io__driver__read__from__ctm}\index{Io\+\_\+driver\+\_\+read\+\_\+from\+\_\+ctm@{Io\+\_\+driver\+\_\+read\+\_\+from\+\_\+ctm}}


This subroutine reads in the restart/starting conditions from the .C\+T\+M file. The input values are checked and possibly adjusted if the run is intended to be with competition on and if the start\+\_\+bare flag is true.  


\begin{DoxyCompactItemize}
\item 
subroutine, public \hyperlink{group__io__driver__read__from__ctm_ga754f9c8c8e4e916e436474006963eae9}{io\+\_\+driver\+::read\+\_\+from\+\_\+ctm} (nltest, nmtest, F\+C\+A\+N\+R\+O\+T, F\+A\+R\+E\+R\+O\+T, R\+S\+M\+N\+R\+O\+T, Q\+A50\+R\+O\+T, V\+P\+D\+A\+R\+O\+T, V\+P\+D\+B\+R\+O\+T, P\+S\+G\+A\+R\+O\+T, P\+S\+G\+B\+R\+O\+T, D\+R\+N\+R\+O\+T, S\+D\+E\+P\+R\+O\+T, X\+S\+L\+P\+R\+O\+T, G\+R\+K\+F\+R\+O\+T, W\+F\+S\+F\+R\+O\+T, W\+F\+C\+I\+R\+O\+T, M\+I\+D\+R\+O\+T, S\+A\+N\+D\+R\+O\+T, C\+L\+A\+Y\+R\+O\+T, O\+R\+G\+M\+R\+O\+T, T\+B\+A\+R\+R\+O\+T, T\+H\+L\+Q\+R\+O\+T, T\+H\+I\+C\+R\+O\+T, T\+C\+A\+N\+R\+O\+T, T\+S\+N\+O\+R\+O\+T, T\+P\+N\+D\+R\+O\+T, Z\+P\+N\+D\+R\+O\+T, R\+C\+A\+N\+R\+O\+T, S\+C\+A\+N\+R\+O\+T, S\+N\+O\+R\+O\+T, A\+L\+B\+S\+R\+O\+T, R\+H\+O\+S\+R\+O\+T, G\+R\+O\+R\+O\+T, argbuff, onetile\+\_\+per\+P\+F\+T)
\end{DoxyCompactItemize}


\subsection{Detailed Description}
This subroutine reads in the restart/starting conditions from the .C\+T\+M file. The input values are checked and possibly adjusted if the run is intended to be with competition on and if the start\+\_\+bare flag is true. 



\subsection{Function/\+Subroutine Documentation}
\hypertarget{group__io__driver__read__from__ctm_ga754f9c8c8e4e916e436474006963eae9}{}\index{Io\+\_\+driver\+\_\+read\+\_\+from\+\_\+ctm@{Io\+\_\+driver\+\_\+read\+\_\+from\+\_\+ctm}!read\+\_\+from\+\_\+ctm@{read\+\_\+from\+\_\+ctm}}
\index{read\+\_\+from\+\_\+ctm@{read\+\_\+from\+\_\+ctm}!Io\+\_\+driver\+\_\+read\+\_\+from\+\_\+ctm@{Io\+\_\+driver\+\_\+read\+\_\+from\+\_\+ctm}}
\subsubsection[{read\+\_\+from\+\_\+ctm}]{\setlength{\rightskip}{0pt plus 5cm}subroutine, public io\+\_\+driver\+::read\+\_\+from\+\_\+ctm (
\begin{DoxyParamCaption}
\item[{integer, intent(in)}]{nltest, }
\item[{integer, intent(inout)}]{nmtest, }
\item[{real, dimension(nlat,nmos,icp1), intent(inout)}]{F\+C\+A\+N\+R\+O\+T, }
\item[{real, dimension(nlat,nmos), intent(inout)}]{F\+A\+R\+E\+R\+O\+T, }
\item[{real, dimension(nlat,nmos,ican), intent(inout)}]{R\+S\+M\+N\+R\+O\+T, }
\item[{real, dimension(nlat,nmos,ican), intent(inout)}]{Q\+A50\+R\+O\+T, }
\item[{real, dimension(nlat,nmos,ican), intent(inout)}]{V\+P\+D\+A\+R\+O\+T, }
\item[{real, dimension(nlat,nmos,ican), intent(inout)}]{V\+P\+D\+B\+R\+O\+T, }
\item[{real, dimension(nlat,nmos,ican), intent(inout)}]{P\+S\+G\+A\+R\+O\+T, }
\item[{real, dimension(nlat,nmos,ican), intent(inout)}]{P\+S\+G\+B\+R\+O\+T, }
\item[{real, dimension(nlat,nmos), intent(inout)}]{D\+R\+N\+R\+O\+T, }
\item[{real, dimension(nlat,nmos), intent(inout)}]{S\+D\+E\+P\+R\+O\+T, }
\item[{real, dimension(nlat,nmos), intent(inout)}]{X\+S\+L\+P\+R\+O\+T, }
\item[{real, dimension(nlat,nmos), intent(inout)}]{G\+R\+K\+F\+R\+O\+T, }
\item[{real, dimension(nlat,nmos), intent(inout)}]{W\+F\+S\+F\+R\+O\+T, }
\item[{real, dimension(nlat,nmos), intent(inout)}]{W\+F\+C\+I\+R\+O\+T, }
\item[{integer, dimension(nlat,nmos), intent(inout)}]{M\+I\+D\+R\+O\+T, }
\item[{real, dimension(nlat,nmos,ignd), intent(inout)}]{S\+A\+N\+D\+R\+O\+T, }
\item[{real, dimension(nlat,nmos,ignd), intent(inout)}]{C\+L\+A\+Y\+R\+O\+T, }
\item[{real, dimension(nlat,nmos,ignd), intent(inout)}]{O\+R\+G\+M\+R\+O\+T, }
\item[{real, dimension(nlat,nmos,ignd), intent(inout)}]{T\+B\+A\+R\+R\+O\+T, }
\item[{real, dimension(nlat,nmos,ignd), intent(inout)}]{T\+H\+L\+Q\+R\+O\+T, }
\item[{real, dimension(nlat,nmos,ignd), intent(inout)}]{T\+H\+I\+C\+R\+O\+T, }
\item[{real, dimension(nlat,nmos), intent(inout)}]{T\+C\+A\+N\+R\+O\+T, }
\item[{real, dimension(nlat,nmos), intent(inout)}]{T\+S\+N\+O\+R\+O\+T, }
\item[{real, dimension(nlat,nmos), intent(inout)}]{T\+P\+N\+D\+R\+O\+T, }
\item[{real, dimension(nlat,nmos), intent(inout)}]{Z\+P\+N\+D\+R\+O\+T, }
\item[{real, dimension(nlat,nmos), intent(inout)}]{R\+C\+A\+N\+R\+O\+T, }
\item[{real, dimension(nlat,nmos), intent(inout)}]{S\+C\+A\+N\+R\+O\+T, }
\item[{real, dimension(nlat,nmos), intent(inout)}]{S\+N\+O\+R\+O\+T, }
\item[{real, dimension(nlat,nmos), intent(inout)}]{A\+L\+B\+S\+R\+O\+T, }
\item[{real, dimension(nlat,nmos), intent(inout)}]{R\+H\+O\+S\+R\+O\+T, }
\item[{real, dimension(nlat,nmos), intent(inout)}]{G\+R\+O\+R\+O\+T, }
\item[{character(80), intent(in)}]{argbuff, }
\item[{logical, intent(in)}]{onetile\+\_\+per\+P\+F\+T}
\end{DoxyParamCaption}
)}\label{group__io__driver__read__from__ctm_ga754f9c8c8e4e916e436474006963eae9}
Read from C\+T\+E\+M initialization file (.C\+T\+M)

The following three variables are needed to run C\+T\+E\+M. 1) min \& 2) max leaf area index are needed to break class lai into dcd and evg for trees (for crops and grasses it doesn\textquotesingle{}t matter much). 3) dvdfcanrow is needed to divide needle \& broad leaf into dcd and evg, and crops \& grasses into c3 and c4 fractions.

Rest of the initialization variables are needed to run C\+T\+E\+M but if starting from bare ground initialize all live and dead c pools from zero. suitable values of extnprobgrd and prbfrhucgrd would still be required. set stdaln to 1 for operation in non-\/gcm stand alone mode, in the C\+T\+E\+M initialization file.

If fire and competition are on, save the stemmass and rootmass for use in burntobare subroutine on the first timestep.

Take the first tile value now and put it over the other tiles

Check that a competition or luc run has the correct number of mosaics. if it is not a start\+\_\+bare run, then nmtest should equal nmos

if this run uses the competition or lnduseon parameterization and starts from bare ground, set up the model state here. this overwrites what was read in from the .ini and .ctm files. for composite runs (the composite set up is after this one for mosaics)

store the read-\/in crop fractions as we keep them even when we start bare. F\+L\+A\+G\+: this is setup assuming that crops are in mosaics 6 and 7. J\+M Apr 9 2014.

check the number of mosaics that came from the .ini file

we need to transfer some initial parameterization info to all mosaics, so set all values to that of the first mosaic.

set the number of mosaics to icc+1

if (nmtest .ne. nmos)

set the initial conditions for the pfts

initalize to zero

set the seed amount for each pft in its mosaic

initial conditions always required

then adjusted below for the actual mosaic makeup

set up for composite runs when start\+\_\+bare is on and compete or landuseon

store the read-\/in crop fractions as we keep them even when we start bare. F\+L\+A\+G\+: this is setup assuming that crops are in pft number 6 and 7. and the first tile contains the information for the grid cell (assumes we have crops in every tile too! J\+M Apr 9 2014.

initalize to zero, these will be filled in by the luc or competition subroutines.

initial conditions always required 

Here is the call graph for this function\+:
% FIG 0


