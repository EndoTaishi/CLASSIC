\hypertarget{competition__unmap_8f}{}\section{competition\+\_\+unmap.\+f File Reference}
\label{competition__unmap_8f}\index{competition\+\_\+unmap.\+f@{competition\+\_\+unmap.\+f}}


Canadian Terrestrial Ecosystem Model (C\+T\+E\+M) Unmapping For Competition.  


\subsection*{Functions/\+Subroutines}
\begin{DoxyCompactItemize}
\item 
subroutine \hyperlink{competition__unmap_8f_ab970a794d878e125da563f7022d2d3a4}{competition\+\_\+unmap} (nml, ilmos, jlmos, nol2pfts,fare\+\_\+cmp,nppveg\+\_\+cmp, geremort\+\_\+cmp,intrmort\+\_\+cmp, gleafmas\+\_\+cmp, bleafmas\+\_\+cmp,stemmass\+\_\+cmp, rootmass\+\_\+cmp, litrmass\+\_\+cmp,soilcmas\+\_\+cmp, pftexist\+\_\+cmp,lambda\+\_\+cmp,bmasveg\+\_\+cmp, burnvegf\+\_\+cmp, add2allo\+\_\+cmp,cc\+\_\+cmp,mm\+\_\+cmp,fcanmx\+\_\+cmp,vgbiomas\+\_\+cmp, grclarea\+\_\+cmp,gavgltms\+\_\+cmp, gavgscms\+\_\+cmp,ta\+\_\+cmp,precip\+\_\+cmp,netrad\+\_\+cmp,tcurm\+\_\+cmp, srpcuryr\+\_\+cmp, dftcuryr\+\_\+cmp,tmonth\+\_\+cmp, anpcpcur\+\_\+cmp, anpecur\+\_\+cmp,gdd5cur\+\_\+cmp, surmncur\+\_\+cmp, defmncur\+\_\+cmp,srplscur\+\_\+cmp, defctcur\+\_\+cmp,twarmm\+\_\+cmp,tcoldm\+\_\+cmp,gdd5\+\_\+cmp, aridity\+\_\+cmp,srplsmon\+\_\+cmp, defctmon\+\_\+cmp, anndefct\+\_\+cmp,annsrpls\+\_\+cmp,annpcp\+\_\+cmp,dry\+\_\+season\+\_\+length\+\_\+cmp,lucemcom\+\_\+cmp, lucltrin\+\_\+cmp, lucsocin\+\_\+cmp,pfcancmx\+\_\+cmp, nfcancmx\+\_\+cmp, pstemmass\+\_\+cmp,pgleafmass\+\_\+cmp,
\end{DoxyCompactItemize}


\subsection{Detailed Description}
Canadian Terrestrial Ecosystem Model (C\+T\+E\+M) Unmapping For Competition. 



\subsection{Function/\+Subroutine Documentation}
\hypertarget{competition__unmap_8f_ab970a794d878e125da563f7022d2d3a4}{}\index{competition\+\_\+unmap.\+f@{competition\+\_\+unmap.\+f}!competition\+\_\+unmap@{competition\+\_\+unmap}}
\index{competition\+\_\+unmap@{competition\+\_\+unmap}!competition\+\_\+unmap.\+f@{competition\+\_\+unmap.\+f}}
\subsubsection[{competition\+\_\+unmap}]{\setlength{\rightskip}{0pt plus 5cm}subroutine competition\+\_\+unmap (
\begin{DoxyParamCaption}
\item[{integer}]{nml, }
\item[{integer, dimension(ilg)}]{ilmos, }
\item[{integer, dimension(ilg)}]{jlmos, }
\item[{integer, dimension(ican)}]{nol2pfts, }
\item[{real, dimension(nlat,icc)}]{fare\+\_\+cmp, }
\item[{real, dimension(nlat,icc)}]{nppveg\+\_\+cmp, }
\item[{real, dimension(nlat,icc)}]{geremort\+\_\+cmp, }
\item[{real, dimension(nlat,icc)}]{intrmort\+\_\+cmp, }
\item[{real, dimension(nlat,icc)}]{gleafmas\+\_\+cmp, }
\item[{real, dimension(nlat,icc)}]{bleafmas\+\_\+cmp, }
\item[{real, dimension(nlat,icc)}]{stemmass\+\_\+cmp, }
\item[{real, dimension(nlat,icc)}]{rootmass\+\_\+cmp, }
\item[{real, dimension(nlat,iccp1)}]{litrmass\+\_\+cmp, }
\item[{real, dimension(nlat,iccp1)}]{soilcmas\+\_\+cmp, }
\item[{logical, dimension(nlat,icc)}]{pftexist\+\_\+cmp, }
\item[{real, dimension(nlat,icc)}]{lambda\+\_\+cmp, }
\item[{real, dimension(nlat,icc)}]{bmasveg\+\_\+cmp, }
\item[{real, dimension(nlat,icc)}]{burnvegf\+\_\+cmp, }
\item[{real, dimension(nlat,icc)}]{add2allo\+\_\+cmp, }
\item[{real, dimension(nlat,icc)}]{cc\+\_\+cmp, }
\item[{real, dimension(nlat,icc)}]{mm\+\_\+cmp, }
\item[{real, dimension(nlat,ican)}]{fcanmx\+\_\+cmp, }
\item[{real, dimension(nlat)}]{vgbiomas\+\_\+cmp, }
\item[{real, dimension(nlat)}]{grclarea\+\_\+cmp, }
\item[{real, dimension(nlat)}]{gavgltms\+\_\+cmp, }
\item[{real, dimension(nlat)}]{gavgscms\+\_\+cmp, }
\item[{real, dimension(nlat)}]{ta\+\_\+cmp, }
\item[{real, dimension(nlat)}]{precip\+\_\+cmp, }
\item[{real, dimension(nlat)}]{netrad\+\_\+cmp, }
\item[{real, dimension(nlat)}]{tcurm\+\_\+cmp, }
\item[{real, dimension(nlat)}]{srpcuryr\+\_\+cmp, }
\item[{real, dimension(nlat)}]{dftcuryr\+\_\+cmp, }
\item[{real, dimension(12,nlat)}]{tmonth\+\_\+cmp, }
\item[{real, dimension(nlat)}]{anpcpcur\+\_\+cmp, }
\item[{real, dimension(nlat)}]{anpecur\+\_\+cmp, }
\item[{real, dimension(nlat)}]{gdd5cur\+\_\+cmp, }
\item[{real, dimension(nlat)}]{surmncur\+\_\+cmp, }
\item[{real, dimension(nlat)}]{defmncur\+\_\+cmp, }
\item[{real, dimension(nlat)}]{srplscur\+\_\+cmp, }
\item[{real, dimension(nlat)}]{defctcur\+\_\+cmp, }
\item[{real, dimension(nlat)}]{twarmm\+\_\+cmp, }
\item[{real, dimension(nlat)}]{tcoldm\+\_\+cmp, }
\item[{real, dimension(nlat)}]{gdd5\+\_\+cmp, }
\item[{real, dimension(nlat)}]{aridity\+\_\+cmp, }
\item[{real, dimension(nlat)}]{srplsmon\+\_\+cmp, }
\item[{real, dimension(nlat)}]{defctmon\+\_\+cmp, }
\item[{real, dimension(nlat)}]{anndefct\+\_\+cmp, }
\item[{real, dimension(nlat)}]{annsrpls\+\_\+cmp, }
\item[{real, dimension(nlat)}]{annpcp\+\_\+cmp, }
\item[{real, dimension(nlat)}]{dry\+\_\+season\+\_\+length\+\_\+cmp, }
\item[{real, dimension(nlat)}]{lucemcom\+\_\+cmp, }
\item[{real, dimension(nlat)}]{lucltrin\+\_\+cmp, }
\item[{real, dimension(nlat)}]{lucsocin\+\_\+cmp, }
\item[{real, dimension(nlat,icc)}]{pfcancmx\+\_\+cmp, }
\item[{real, dimension(nlat,icc)}]{nfcancmx\+\_\+cmp, }
\item[{real, dimension(nlat,icc)}]{pstemmass\+\_\+cmp, }
\item[{real, dimension(nlat,icc)}]{pgleafmass\+\_\+cmp}
\end{DoxyParamCaption}
)}\label{competition__unmap_8f_ab970a794d878e125da563f7022d2d3a4}

\begin{DoxyParams}{Parameters}
{\em nml} & total number of mosaic tiles with pft fractions larger than 1, see gatprep.\+f\\
\hline
{\em ilmos} & indices for scattering, see gatprep.\+f\\
\hline
{\em jlmos} & indices for scattering, see gatprep.\+f\\
\hline
{\em fare\+\_\+cmp} & fractional coverage of ctem\textquotesingle{}s 10 pfts in each latitudinal grid cell\\
\hline
{\em nppveg\+\_\+cmp} & npp for each pft type of vegetated area in each latitudinal grid cell\\
\hline
{\em geremort\+\_\+cmp} & growth related mortality in each latitudinal grid cell\\
\hline
{\em intrmort\+\_\+cmp} & intrinsic (age related) mortality in each latitudinal grid cell\\
\hline
{\em gleafmas\+\_\+cmp} & green leaf mass for each of the 10 ctem pfts in each latitudinal grid cell\\
\hline
{\em bleafmas\+\_\+cmp} & brown leaf mass for each of the 10 ctem pfts in each latitudinal grid cell\\
\hline
{\em stemmass\+\_\+cmp} & stem mass for each of the 10 ctem pfts in each latitudinal grid cell\\
\hline
{\em rootmass\+\_\+cmp} & root mass for each of the 10 ctem pfts in each latitudinal grid cell\\
\hline
{\em litrmass\+\_\+cmp} & litter mass for each of the 10 ctem pfts + bare, in each latitudinal grid cell\\
\hline
{\em soilcmas\+\_\+cmp} & soil carbon mass for each of the 10 ctem pfts + bare, in each latitudinal grid cell\\
\hline
{\em lambda\+\_\+cmp} & fraction of npp that is used for horizontal expansion in each latitudinal grid cell\\
\hline
{\em bmasveg\+\_\+cmp} & total (gleaf + stem + root) biomass for each ctem pft, $kg c/m^2$ in each latitudinal grid cell\\
\hline
{\em burnvegf\+\_\+cmp} & fractional areas burned, for ctem pfts in each latitudinal grid cell\\
\hline
{\em add2allo\+\_\+cmp} & npp $kg c/m^2$.day in each latitudinal grid cell that is used for expansion and subsequently allocated to leaves, stem, and root via the allocation part of the model.\\
\hline
{\em cc\+\_\+cmp} & colonization rate \& mortality rate in each latitudinal grid cell\\
\hline
{\em mm\+\_\+cmp} & colonization rate \& mortality rate in each latitudinal grid cell\\
\hline
{\em fcanmx\+\_\+cmp} & fractional coverage of class\textquotesingle{} 4 pfts in each latitudinal grid cell\\
\hline
{\em grclarea\+\_\+cmp} & area of the grid cell, $km^2$\\
\hline
{\em vgbiomas\+\_\+cmp} & grid averaged vegetation biomass, $kg c/m^2$\\
\hline
{\em gavgltms\+\_\+cmp} & grid averaged litter mass, $kg c/m^2$\\
\hline
{\em gavgscms\+\_\+cmp} & grid averaged soil c mass, $kg c/m^2$\\
\hline
{\em lucemcom\+\_\+cmp} & land use change (luc) related combustion emission losses in each latitudional grid cell, u-\/mol co2/m2.\+sec\\
\hline
{\em lucltrin\+\_\+cmp} & luc related inputs to litter pool, in each latitudional grid cell, u-\/mol co2/m2.\+sec\\
\hline
{\em lucsocin\+\_\+cmp} & luc related inputs to soil c pool, in each latitudional grid cell, u-\/mol co2/m2.\+sec\\
\hline
{\em pfcancmx\+\_\+cmp} & previous year\textquotesingle{}s fractional coverages of pfts in each latitudinal grid cell\\
\hline
{\em nfcancmx\+\_\+cmp} & next year\textquotesingle{}s fractional coverages of pfts in each latitudinal grid cell\\
\hline
{\em pstemmass\+\_\+cmp} & stem mass from previous timestep, is value before fire. used by burntobare subroutine\\
\hline
{\em pgleafmass\+\_\+cmp} & root mass from previous timestep, is value before fire. used by burntobare subroutine\\
\hline
{\em pftexist\+\_\+cmp} & logical array indicating pfts exist (t) or not (f) in each latitudinal grid cell\\
\hline
{\em ta\+\_\+cmp} & mean daily temperature (k) in each latitudinal grid cell\\
\hline
{\em precip\+\_\+cmp} & daily precipitation (mm/day) in each latitudinal grid cell\\
\hline
{\em netrad\+\_\+cmp} & daily net radiation (w/m2) in each latitudinal grid cell\\
\hline
{\em tcurm\+\_\+cmp} & temperature of the current month (c) in each latitudinal grid cell\\
\hline
{\em srpcuryr\+\_\+cmp} & water surplus for the current year in each latitudinal grid cell\\
\hline
{\em dftcuryr\+\_\+cmp} & water deficit for the current year in each latitudinal grid cell\\
\hline
{\em tmonth\+\_\+cmp} & monthly temperatures in each latitudinal grid cell\\
\hline
{\em anpcpcur\+\_\+cmp} & annual precipitation for current year (mm) in each latitudinal grid cell\\
\hline
{\em anpecur\+\_\+cmp} & annual potential evaporation for current year (mm) in each latitudinal grid cell\\
\hline
{\em gdd5cur\+\_\+cmp} & growing degree days above 5 c for current year in each latitudinal grid cell\\
\hline
{\em surmncur\+\_\+cmp} & number of months with surplus water for current year in each latitudinal grid cell\\
\hline
{\em defmncur\+\_\+cmp} & number of months with water deficit for current year in each latitudinal grid cell\\
\hline
{\em srplscur\+\_\+cmp} & water surplus for the current month in each latitudinal grid cell\\
\hline
{\em defctcur\+\_\+cmp} & water deficit for the current month in each latitudinal grid cell\\
\hline
{\em twarmm\+\_\+cmp} & temperature of the warmest month (c) in each latitudinal grid cell\\
\hline
{\em tcoldm\+\_\+cmp} & temperature of the coldest month (c) in each latitudinal grid cell\\
\hline
{\em gdd5\+\_\+cmp} & growing degree days above 5 c in each latitudinal grid cell\\
\hline
{\em aridity\+\_\+cmp} & aridity index, ratio of potential evaporation to precipitation in each latitudinal grid cell\\
\hline
{\em srplsmon\+\_\+cmp} & number of months in a year with surplus water i.\+e. precipitation more than potential evaporation in each latitudinal grid cell\\
\hline
{\em defctmon\+\_\+cmp} & number of months in a year with water deficit i.\+e. precipitation less than potential evaporation in each latitudinal grid cell\\
\hline
{\em anndefct\+\_\+cmp} & annual water deficit (mm) in each latitudinal grid cell\\
\hline
{\em annsrpls\+\_\+cmp} & annual water surplus (mm) in each latitudinal grid cell\\
\hline
{\em annpcp\+\_\+cmp} & annual precipitation (mm) in each latitudinal grid cell\\
\hline
{\em dry\+\_\+season\+\_\+length\+\_\+cmp} & length of dry season (months) in each latitudional grid cell \\
\hline
\end{DoxyParams}


 parameters used

note the structure of parameter vectors which clearly shows the class pfts (along rows) and ctem sub-\/pfts (along columns) \subsubsection*{\[ \begin{tabular} { | l | c | c | c | } \hline needle leaf & evg1 & evg2 & dcd \\ \hline broad leaf & evg & dcd-cld & dcd-dry \\ \hline crops & c3 & c4 & --- \\ \hline grasses & c3 & c4 & --- \\ \hline \end{tabular} \] }

initialization

note that netradrow is not initialized here because it is updated

unmapping the pft fraction in each grid cell (fare\+\_\+cmp) back to the pft index in each mosaic of each grid cell (fcancmxrow) and update the pft areal fraction in each mosaic of each grid cell (farerow)

check if bare fraction is existed

unmapping back to fcancmxrow and update farerow

gathering the pft index in each mosaic of each grid cell (fcancmxrow) to the pft index in each mosaic (fcancmx) nml, ilmos and jlmos are referring to gatprep.\+f