<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>CLASS-CTEM Documentation: SNOALBA.f File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">CLASS-CTEM Documentation
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Types&#160;List</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions/Subroutines</a>  </div>
  <div class="headertitle">
<div class="title">SNOALBA.f File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Purpose: Diagnose snowpack visible and near-IR albedos given the all-wave albedo at the current time step. Calculate snowpack transmissivity for shortwave radiation.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions/Subroutines</h2></td></tr>
<tr class="memitem:a414a4eaf6a7d196c40633aa1c1ab2159"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="SNOALBA_8f.html#a414a4eaf6a7d196c40633aa1c1ab2159">snoalba</a> (ALVSSN, ALIRSN, ALVSSC, ALIRSC, ALBSNO, TRSNOWC, ALSNO, TRSNOWG, FSDB, FSFB, RHOSNO, REFSN, BCSN, SNO, CSZ, ZSNOW, FSNOW, ASVDAT, ASIDAT, ALVSG, ALIRG, ILG, IG, IL1, IL2, JL, IALS, NBS, ISNOALB)</td></tr>
<tr class="separator:a414a4eaf6a7d196c40633aa1c1ab2159"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Purpose: Diagnose snowpack visible and near-IR albedos given the all-wave albedo at the current time step. Calculate snowpack transmissivity for shortwave radiation. </p>
</div><h2 class="groupheader">Function/Subroutine Documentation</h2>
<a class="anchor" id="a414a4eaf6a7d196c40633aa1c1ab2159"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine snoalba </td>
          <td>(</td>
          <td class="paramtype">real, dimension(ilg)&#160;</td>
          <td class="paramname"><em>ALVSSN</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(ilg)&#160;</td>
          <td class="paramname"><em>ALIRSN</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(ilg)&#160;</td>
          <td class="paramname"><em>ALVSSC</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(ilg)&#160;</td>
          <td class="paramname"><em>ALIRSC</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(ilg)&#160;</td>
          <td class="paramname"><em>ALBSNO</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(ilg)&#160;</td>
          <td class="paramname"><em>TRSNOWC</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension (ilg,nbs)&#160;</td>
          <td class="paramname"><em>ALSNO</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(ilg,nbs)&#160;</td>
          <td class="paramname"><em>TRSNOWG</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(ilg,nbs)&#160;</td>
          <td class="paramname"><em>FSDB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(ilg,nbs)&#160;</td>
          <td class="paramname"><em>FSFB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(ilg)&#160;</td>
          <td class="paramname"><em>RHOSNO</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension (ilg)&#160;</td>
          <td class="paramname"><em>REFSN</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension  (ilg)&#160;</td>
          <td class="paramname"><em>BCSN</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension   (ilg)&#160;</td>
          <td class="paramname"><em>SNO</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension   (ilg)&#160;</td>
          <td class="paramname"><em>CSZ</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension (ilg)&#160;</td>
          <td class="paramname"><em>ZSNOW</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension (ilg)&#160;</td>
          <td class="paramname"><em>FSNOW</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(ilg)&#160;</td>
          <td class="paramname"><em>ASVDAT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(ilg)&#160;</td>
          <td class="paramname"><em>ASIDAT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension  (ilg)&#160;</td>
          <td class="paramname"><em>ALVSG</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension  (ilg)&#160;</td>
          <td class="paramname"><em>ALIRG</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer&#160;</td>
          <td class="paramname"><em>ILG</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer&#160;</td>
          <td class="paramname"><em>IG</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer&#160;</td>
          <td class="paramname"><em>IL1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer&#160;</td>
          <td class="paramname"><em>IL2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer&#160;</td>
          <td class="paramname"><em>JL</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer&#160;</td>
          <td class="paramname"><em>IALS</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer&#160;</td>
          <td class="paramname"><em>NBS</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer&#160;</td>
          <td class="paramname"><em>ISNOALB</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">alvssn</td><td>Visible albedo of snow pack on bare ground <img class="formulaInl" alt="$[ ] (alpha_{s,VIS})$" src="form_1470.png"/></td></tr>
    <tr><td class="paramname">alirsn</td><td>Near-IR albedo of snow pack on bare ground <img class="formulaInl" alt="$[ ] (alpha_{s,NIR})$" src="form_1471.png"/></td></tr>
    <tr><td class="paramname">alvssc</td><td>Visible albedo of snow on ground under vegetation canopy [ ]</td></tr>
    <tr><td class="paramname">alirsc</td><td>Near-IR albedo of snow on ground under vegetation canopy [ ]</td></tr>
    <tr><td class="paramname">trsnowc</td><td>Transmissivity of snow to shortwave radiation <img class="formulaInl" alt="$[ ] (\tau_s)$" src="form_1472.png"/></td></tr>
    <tr><td class="paramname">albsno</td><td>All-wave albedo of snow pack <img class="formulaInl" alt="$[ ] (\alpha_{s,T})$" src="form_1473.png"/></td></tr>
    <tr><td class="paramname">zsnow</td><td>Depth of snow <img class="formulaInl" alt="$[m] (z_s)$" src="form_811.png"/></td></tr>
    <tr><td class="paramname">fsnow</td><td>Fractional coverage of snow on grid cell [ ]</td></tr>
    <tr><td class="paramname">asvdat</td><td>Assigned value of visible albedo of snow pack – optional [ ]</td></tr>
    <tr><td class="paramname">asidat</td><td>Assigned value of near-IR albedo of snow pack – optional [ ] </td></tr>
  </table>
  </dd>
</dl>
<p>In subroutine SNOALBW, called at the end of CLASSW, the change of total snow albedo over the current time step is calculated using an empirical exponential decay function, which has different coefficients depending on whether the snow is dry or melting. In this subroutine, the visible and near-IR components of the snow albedo are diagnosed from the total albedo. According to the literature (Aguado, 1985; Robinson and Kukla, 1984; Dirmhirn and Eaton, 1975), the following represent typical snow albedos for fresh snow, old dry snow and melting snow:</p>
<p class="formulaDsp">
<img class="formulaDsp" alt="\[ \begin{tabular} { | l | c | c | c | } \hline &amp; Total albedo &amp; Visible albedo &amp; Near-IR albedo \\ \hline Fresh snow &amp; 0.84 &amp; 0.95 &amp; 0.73 \\ \hline Old dry snow &amp; 0.70 &amp; 0.84 &amp; 0.56 \\ \hline Melting snow &amp; 0.50 &amp; 0.62 &amp; 0.38 \\ \hline \end{tabular} \]" src="form_1474.png"/>
</p>
<p>The same decay function is assumed to apply to all three albedo ranges, so the relative location of the visible and near-IR albedos, <img class="formulaInl" alt="$\alpha_{s,VIS}$" src="form_1475.png"/> and <img class="formulaInl" alt="$\alpha_{s,NIR}$" src="form_1476.png"/>, on the decay curve will be analogous to that of the total albedo, <img class="formulaInl" alt="$\alpha_{s,T}$" src="form_1477.png"/>. Thus, for dry snow:</p>
<p><img class="formulaInl" alt="$[\alpha_{s,VIS} - 0.84]/[0.95-0.84] = [\alpha_{s,T} - 0.70]/[0.84-0.70]$" src="form_1478.png"/> <img class="formulaInl" alt="$[\alpha_{s,NIR} - 0.56]/[0.73-0.56] = [\alpha_{s,T} - 0.70]/[0.84-0.70]$" src="form_1479.png"/></p>
<p>or, simplifying:</p>
<p><img class="formulaInl" alt="$\alpha_{s,VIS} = 0.79[\alpha_{s,T} - 0.70] + 0.84$" src="form_1480.png"/> <img class="formulaInl" alt="$\alpha_{s,NIR} = 1.21[\alpha_{s,T} - 0.70] + 0.56$" src="form_1481.png"/></p>
<p>For melting snow:</p>
<p>[ <img class="formulaInl" alt="$\alpha_{s,VIS} - 0.62]/[0.95-0.62] = [\alpha_{s,T} - 0.50]/[0.84-0.50]$" src="form_1482.png"/> [ <img class="formulaInl" alt="$\alpha_{s,NIR} - 0.38]/[0.73-0.38] = [\alpha_{s,T} - 0.50]/[0.84-0.50]$" src="form_1483.png"/></p>
<p>or, simplifying:</p>
<p><img class="formulaInl" alt="$\alpha_{s,VIS} = 0.97[\alpha_{s,T} - 0.50] + 0.62$" src="form_1484.png"/> <img class="formulaInl" alt="$\alpha_{s,NIR} = 1.03[\alpha_{s,T} - 0.50] + 0.38$" src="form_1485.png"/></p>
<p>The above calculations are performed if the flag IALS is set to zero. If IALS is set to one, indicating that assigned snow albedos are to be used instead of calculated values, <img class="formulaInl" alt="$\alpha_{s,VIS}$" src="form_1475.png"/> and <img class="formulaInl" alt="$\alpha_{s,NIR}$" src="form_1476.png"/> are set to the assigned values ASVDAT and ASIDAT respectively. The sub-canopy values of visible and near-IR albedo are currently set equal to the open snowpack values (this is expected to change if a canopy litterfall parametrization is developed).</p>
<p>The transmissivity of snow <img class="formulaInl" alt="$\tau_s$" src="form_1486.png"/> is calculated from the snow depth ZSNOW using Beer’s law, with an empirical extinction coefficient of <img class="formulaInl" alt="$25.0 m^{-1}$" src="form_1487.png"/> derived from the literature (Grenfell and Maykut, 1977; Thomas, 1963):</p>
<p><img class="formulaInl" alt="$\tau_s = exp[-25.0 z_s]$" src="form_1488.png"/></p>
<p>Convert the units of the snow grain size and BC mixing ratio Snow grain size from meters to microns and BC from <img class="formulaInl" alt="$kg BC/m^3$" src="form_1489.png"/> to ng BC/kg SNOW</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Sep 7 2016 18:08:21 for CLASS-CTEM Documentation by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.9.1
</small></address>
</body>
</html>
