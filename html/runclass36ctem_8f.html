<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>CLASS-CTEM: runclass36ctem.f File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">CLASS-CTEM
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Types&#160;List</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions/Subroutines</a>  </div>
  <div class="headertitle">
<div class="title">runclass36ctem.f File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Principle driver program to run CLASS in stand-alone mode using specified boundary conditions and atmospheric forcing, coupled to CTEM.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions/Subroutines</h2></td></tr>
<tr class="memitem:a6d56d6301df42923fa1e8aa2e6c02ec3"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6d56d6301df42923fa1e8aa2e6c02ec3"></a>
program&#160;</td><td class="memItemRight" valign="bottom"><b>runclass36ctem</b></td></tr>
<tr class="separator:a6d56d6301df42923fa1e8aa2e6c02ec3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae665ea752226de365786f295628b2f4f"><td class="memItemLeft" align="right" valign="top">integer function&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="runclass36ctem_8f.html#ae665ea752226de365786f295628b2f4f">strlen</a> (ST)</td></tr>
<tr class="memdesc:ae665ea752226de365786f295628b2f4f"><td class="mdescLeft">&#160;</td><td class="mdescRight">After the DIMENSION statements and variable declarations, the common blocks are defined and the values of the parameters are assigned through the external BLOCK DATA routine CLASSBD and a call to the subroutine CLASSD (see the appropriate section.)  <a href="#ae665ea752226de365786f295628b2f4f">More...</a><br /></td></tr>
<tr class="separator:ae665ea752226de365786f295628b2f4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1804a475192bb994b7e4be078687d902"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1804a475192bb994b7e4be078687d902"></a>
character(len=10) function&#160;</td><td class="memItemRight" valign="bottom"><b>int2str</b> (i)</td></tr>
<tr class="separator:a1804a475192bb994b7e4be078687d902"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Principle driver program to run CLASS in stand-alone mode using specified boundary conditions and atmospheric forcing, coupled to CTEM. </p>
<h1>Overview</h1>
<p>This driver program initializes the run, reads in CLASS input files, manages the run and the coupling between CLASS and CTEM, writes the CLASS sub-monthly outputs, and closes the run. </p>
</div><h2 class="groupheader">Function/Subroutine Documentation</h2>
<a class="anchor" id="ae665ea752226de365786f295628b2f4f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">integer function strlen </td>
          <td>(</td>
          <td class="paramtype">character, dimension(*)&#160;</td>
          <td class="paramname"><em>ST</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>After the DIMENSION statements and variable declarations, the common blocks are defined and the values of the parameters are assigned through the external BLOCK DATA routine CLASSBD and a call to the subroutine CLASSD (see the appropriate section.) </p>
<p>The grid-average height for the momentum diagnostic variables, ZDMROW, and for the energy diagnostic variables, ZDHROW, are hard-coded to the standard anemometer height of 10 m and to the screen height of 2 m respectively. The soil colour index SOCIROT is assigned a representative value. Next the first data line in the “ini” file is read, which contains several basic pieces of information: 1) DEGLAT and DEGLON, the latitude (positive northward, negative southward) and longitude (east of Greenwich), in degrees. 2) ZRFMROW and ZRFHROW, the reference heights at which the momentum variables (wind speed) and energy variables (temperature and specific humidity) are provided. In a run using atmospheric model forcing data, these heights would vary by time step, but since this version of the driver is set up to use field data, ZRFMROW and ZRFHROW refer to the measurement height of these variables, which is fixed. 3) ZBLDROW, the atmospheric blending height. Technically this variable depends on the length scale of the patches of roughness elements on the land surface, but this is difficult to ascertain. Here it is assigned a value of 50 m. 4) GCROW, the GCM surface descriptor variable. For land surfaces (including inland water) it has a value of -1. 5) NLTEST and NMTEST, the number of grid cells and the number of mosaic tiles per grid cell for this test run. As noted above, the benchmark version of the driver is set up to handle one grid cell with one mosaic tile, so NLTEST and NMTEST are each assigned values of 1 in the “ini” file, and all of the ROW input variables have only one entry. If it were desired to run different data sets with more tiles or grid cells, a loop or loops would have to be introduced into the READ statements, and additional lines in the “ini” file, to read in the necessary information. In the following lines of code the parameter JLAT is calculated from DEGLAT as the nearest integer value, and DEGLON is converted to radians and stored in the array RADJROW. DEGLON is stored as is in DLONROW. The orographic roughness length, Z0ORROW, and the geothermal heat flux, GGEOROW, are set to zero for this application. In the 50 loop, vegetation and soil information are read over each of the NLTEST x NMTEST modelled areas and mosaic tiles (= 1 in the benchmark simulation). The first twelve lines deal with background data. The last three lines deal with initialization data for the CLASS prognostic variables. (For more details on these data see the section on “Data Requirements” in the manual). In the 100 and 150 loops, further initial calculations are done. In the 100 loop the temperatures that were read from the “ini” file are converted to degrees K, and initial values are assigned to secondary prognostic variables. The limiting snow depth, ZSNL, is assigned its operational value of 0.10 m. An option is included to extrapolate soil information to layers below the third layer, if more are being modelled and if no measured data are available for them. (This loop is to be the daily average accumulator arrays are initialized to zero. As the last step in the initialization sequence, the subroutine CLASSB is called, to assign soil thermal and hydraulic properties on the basis of the textural information read in for each of the soil layers. The timestep counter N for the run is initialized to 0, the daily averaging counter NCOUNT is set to 1, and the total number of timesteps in the day NDAY is calculated as the number of seconds in a day (86400) divided by the timestep length DELT. The 200 continuation line marks the beginning of the time stepping loop for the actual run. N is incremented by 1, and the atmospheric forcing data for the current time step are read in for each grid cell or modelled area (see the section on “Data Requirements”). In the dataset associated with the benchmark run, only the total incoming shortwave radiation FSDOWN is available; it is partitioned 50:50 between the incoming visible (FSVHROW) and near-infrared (FSIHROW) radiation. The first two elements of the generalized incoming radiation array, FSSBROL (used for both the ISNOALB=0 and ISNOALB=1 options) are set to FSVHROW and FSIHROW respectively. The air temperature TAROW is converted from degrees C to K. The zonal (ULROW) and meridional (VLROW) components of the wind speed are not available at the benchmark site; only the overall wind speed UVROW is measured. However, CLASS does not require wind direction for its calculations, so ULROW is arbitrarily assigned the value of UVROW and VLROW is set to zero for this run. The input wind speed VMODROW is assigned the value of UVROW. The cosine of the solar zenith angle COSZ is calculated from the day of the year, the hour, the minute and the latitude using basic radiation geometry, and (avoiding vanishingly small numbers) is assigned to CSZROW. The fractional cloud cover FCLOROW is not available at the benchmark site; a rough estimate is obtained by setting it to 1 when precipitation is occurring, and to the fraction of incoming diffuse radiation XDIFFUS otherwise (assumed to be 1 when the sun is at the horizon, and 0.10 when it is at the zenith). CLASSI evaluates a series of derived atmospheric variables GATPREP assigns values to vectors governing the gather-scatter operations CLASSG performs the gather operation, gathering variables from their positions as mosaic tiles within the modelled areas to long vectors of mosaic tiles CLASSZ does the initial calculations for the energy and water balance checks; CLASSA manages the calculation of albedos and other surface parameters; CLASST calls the subroutines associated with the surface energy balance calculations CLASSW calls the subroutines associated with the surface water balance calculations CLASSZ completes the energy and water balance checks for the current time step CLASSS performs the scatter operation, scattering the variables from the long vectors of mosaic tiles back onto the configuration of mosaic tiles within grid cells. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Apr 4 2017 18:16:57 for CLASS-CTEM by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.9.1
</small></address>
</body>
</html>
