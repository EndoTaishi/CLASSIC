<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>CLASS-CTEM: Io_driver_read_from_ctm</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">CLASS-CTEM
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Types&#160;List</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Io_driver_read_from_ctm</div>  </div>
</div><!--header-->
<div class="contents">

<p>This subroutine reads in the restart/starting conditions from the .CTM file. The input values are checked and possibly adjusted if the run is intended to be with competition on and if the start_bare flag is true.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="memitem:ga754f9c8c8e4e916e436474006963eae9"><td class="memItemLeft" align="right" valign="top">subroutine, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__io__driver__read__from__ctm.html#ga754f9c8c8e4e916e436474006963eae9">io_driver::read_from_ctm</a> (nltest, nmtest, FCANROT, FAREROT, RSMNROT, QA50ROT, VPDAROT, VPDBROT, PSGAROT, PSGBROT, DRNROT, SDEPROT, XSLPROT, GRKFROT, WFSFROT, WFCIROT, MIDROT, SANDROT, CLAYROT, ORGMROT, TBARROT, THLQROT, THICROT, TCANROT, TSNOROT, TPNDROT, ZPNDROT, RCANROT, SCANROT, SNOROT, ALBSROT, RHOSROT, GROROT, argbuff, onetile_perPFT)</td></tr>
<tr class="separator:ga754f9c8c8e4e916e436474006963eae9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>This subroutine reads in the restart/starting conditions from the .CTM file. The input values are checked and possibly adjusted if the run is intended to be with competition on and if the start_bare flag is true. </p>
<h2 class="groupheader">Function/Subroutine Documentation</h2>
<a class="anchor" id="ga754f9c8c8e4e916e436474006963eae9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine, public io_driver::read_from_ctm </td>
          <td>(</td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>nltest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(inout)&#160;</td>
          <td class="paramname"><em>nmtest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(nlat,nmos,icp1), intent(inout)&#160;</td>
          <td class="paramname"><em>FCANROT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(nlat,nmos), intent(inout)&#160;</td>
          <td class="paramname"><em>FAREROT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(nlat,nmos,ican), intent(inout)&#160;</td>
          <td class="paramname"><em>RSMNROT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(nlat,nmos,ican), intent(inout)&#160;</td>
          <td class="paramname"><em>QA50ROT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(nlat,nmos,ican), intent(inout)&#160;</td>
          <td class="paramname"><em>VPDAROT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(nlat,nmos,ican), intent(inout)&#160;</td>
          <td class="paramname"><em>VPDBROT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(nlat,nmos,ican), intent(inout)&#160;</td>
          <td class="paramname"><em>PSGAROT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(nlat,nmos,ican), intent(inout)&#160;</td>
          <td class="paramname"><em>PSGBROT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(nlat,nmos), intent(inout)&#160;</td>
          <td class="paramname"><em>DRNROT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(nlat,nmos), intent(inout)&#160;</td>
          <td class="paramname"><em>SDEPROT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(nlat,nmos), intent(inout)&#160;</td>
          <td class="paramname"><em>XSLPROT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(nlat,nmos), intent(inout)&#160;</td>
          <td class="paramname"><em>GRKFROT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(nlat,nmos), intent(inout)&#160;</td>
          <td class="paramname"><em>WFSFROT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(nlat,nmos), intent(inout)&#160;</td>
          <td class="paramname"><em>WFCIROT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, dimension(nlat,nmos), intent(inout)&#160;</td>
          <td class="paramname"><em>MIDROT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(nlat,nmos,ignd), intent(inout)&#160;</td>
          <td class="paramname"><em>SANDROT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(nlat,nmos,ignd), intent(inout)&#160;</td>
          <td class="paramname"><em>CLAYROT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(nlat,nmos,ignd), intent(inout)&#160;</td>
          <td class="paramname"><em>ORGMROT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(nlat,nmos,ignd), intent(inout)&#160;</td>
          <td class="paramname"><em>TBARROT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(nlat,nmos,ignd), intent(inout)&#160;</td>
          <td class="paramname"><em>THLQROT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(nlat,nmos,ignd), intent(inout)&#160;</td>
          <td class="paramname"><em>THICROT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(nlat,nmos), intent(inout)&#160;</td>
          <td class="paramname"><em>TCANROT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(nlat,nmos), intent(inout)&#160;</td>
          <td class="paramname"><em>TSNOROT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(nlat,nmos), intent(inout)&#160;</td>
          <td class="paramname"><em>TPNDROT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(nlat,nmos), intent(inout)&#160;</td>
          <td class="paramname"><em>ZPNDROT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(nlat,nmos), intent(inout)&#160;</td>
          <td class="paramname"><em>RCANROT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(nlat,nmos), intent(inout)&#160;</td>
          <td class="paramname"><em>SCANROT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(nlat,nmos), intent(inout)&#160;</td>
          <td class="paramname"><em>SNOROT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(nlat,nmos), intent(inout)&#160;</td>
          <td class="paramname"><em>ALBSROT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(nlat,nmos), intent(inout)&#160;</td>
          <td class="paramname"><em>RHOSROT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(nlat,nmos), intent(inout)&#160;</td>
          <td class="paramname"><em>GROROT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">character(80), intent(in)&#160;</td>
          <td class="paramname"><em>argbuff</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">logical, intent(in)&#160;</td>
          <td class="paramname"><em>onetile_perPFT</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Read from CTEM initialization file (.CTM)</p>
<p>The following three variables are needed to run CTEM. 1) min &amp; 2) max leaf area index are needed to break class lai into dcd and evg for trees (for crops and grasses it doesn't matter much). 3) dvdfcanrow is needed to divide needle &amp; broad leaf into dcd and evg, and crops &amp; grasses into c3 and c4 fractions.</p>
<p>Rest of the initialization variables are needed to run CTEM but if starting from bare ground initialize all live and dead c pools from zero. suitable values of extnprobgrd and prbfrhucgrd would still be required. set stdaln to 1 for operation in non-gcm stand alone mode, in the CTEM initialization file.</p>
<p>If fire and competition are on, save the stemmass and rootmass for use in burntobare subroutine on the first timestep.</p>
<p>If this grid cell has peatlands in it then the ipeatland flag is set to 1 (bog), or 2 (fen) otherwise it is 0 (no peatland). the other variables then are the carbon in moss biomass, the moss litter mass, and depth of living moss.</p>
<p>Take the first tile value now and put it over the other tiles</p>
<p>Check that a competition or luc run has the correct number of mosaics. if it is not a start_bare run, then nmtest should equal nmos</p>
<p>if this run uses the competition or lnduseon parameterization and starts from bare ground, set up the model state here. this overwrites what was read in from the .ini and .ctm files. for composite runs (the composite set up is after this one for mosaics)</p>
<p>store the read-in crop fractions as we keep them even when we start bare. FLAG: this is setup assuming that crops are in mosaics 6 and 7. JM Apr 9 2014.</p>
<p>check the number of mosaics that came from the .ini file</p>
<p>we need to transfer some initial parameterization info to all mosaics, so set all values to that of the first mosaic.</p>
<p>set the number of mosaics to icc+1</p>
<p>if (nmtest .ne. nmos)</p>
<p>set the initial conditions for the pfts</p>
<p>initalize to zero</p>
<p>set the seed amount for each pft in its mosaic</p>
<p>initial conditions always required</p>
<p>then adjusted below for the actual mosaic makeup</p>
<p>set up for composite runs when start_bare is on and compete or landuseon</p>
<p>store the read-in crop fractions as we keep them even when we start bare. FLAG: this is setup assuming that crops are in pft number 6 and 7. and the first tile contains the information for the grid cell (assumes we have crops in every tile too! JM Apr 9 2014.</p>
<p>initalize to zero, these will be filled in by the luc or competition subroutines.</p>
<p>initial conditions always required </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Apr 4 2017 18:16:57 for CLASS-CTEM by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.9.1
</small></address>
</body>
</html>
